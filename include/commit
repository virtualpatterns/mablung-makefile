
dirty-item = $(strip $\
							$(shell git status --porcelain | awk '{print $$2}'))

ifndef current-folder

add-item = $(patsubst $\
						%,$\
						%.add,$\
						$(dirty-item))

.PHONY: commit

# $(info --------------------)
# $(info add-item = $(add-item))
# $(info --------------------)

commit:: $(add-item)
	$(if $\
		$(add-item),$\
		@git commit --message=$(or $(message),unknown),$\
		@npx shx echo -n)

%.add:
	@git add $(patsubst %.add,%,$@)

endif